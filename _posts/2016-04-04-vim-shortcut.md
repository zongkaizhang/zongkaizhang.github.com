---
layout: post
title: "VIM快捷键"
subtitle: "VIM常用操作"
category: "开发工具"
tags: [vim,linux]
---
{% include JB/setup %}
---
* content
{:toc}

# vi 工作模式 #

- 插入模式
是用来编写文本内容的。
- 命令模式
是用来编辑文本，如上下翻页等，复制粘贴，跳转到指定行等操作

当前编辑的顶部或者底部会显示vim处于何种模式下。如：mode：COMMAND!

## 模式转换 ##

插入模式—&gt; Esc键—&gt;命令模式 

命令模式—&gt;： —&gt; 编辑模式

编辑模式—&gt;命令行回车结束运行—&gt;命令模式

# 移动光标 #

## 方向 ##

<table class="table table-condensed">
<tr><th> 移动命令   </th><th> 操作        </th></tr>
<tr><td> h/方向左键 </td><td> 左移一个字符</td></tr>
<tr><td> j/方向下键 </td><td> 下移一行    </td></tr>
<tr><td> k/方向上键 </td><td> 上移一行    </td></tr>
<tr><td> l/方向右键 </td><td> 右移一个字符</td></tr>
</table>


## 屏幕 ##

<table class="table table-condensed">
<tr><th> 移动命令   </th><th> 操作         </th></tr>
<tr><td> Ctrl + e   </td><td> 向下滚动一行 </td></tr>
<tr><td> Ctrl + y   </td><td> 向上滚动一行 </td></tr>
<tr><td> Ctrl + d   </td><td> 向下滚动半屏 </td></tr>
<tr><td> Ctrl + u   </td><td> 向上滚动半屏 </td></tr>
<tr><td> Ctrl + f   </td><td> 向下滚动一屏 </td></tr>
<tr><td> Ctrl + b   </td><td> 向上滚动一屏 </td></tr>
<tr><td> H          </td><td> 移至屏幕上端 </td></tr>
<tr><td> M          </td><td> 移至屏幕中央 </td></tr>
<tr><td> L          </td><td> 移至屏幕下端 </td></tr>
</table>

## 行操作 ##

<table class="table table-condensed">
<tr><th> 移动命令   </th><th> 操作               </th></tr>
<tr><td> $/end      </td><td> 移至行尾           </td></tr>
<tr><td> 0/home     </td><td> 移至行首           </td></tr>
<tr><td> (          </td><td> 移动到上一个句子首 </td></tr>
<tr><td> )          </td><td> 移动到下一个句子首 </td></tr>
<tr><td> {          </td><td> 移动到上一个段落首 </td></tr>
<tr><td> }          </td><td> 移动到下一个段落首 </td></tr>
<tr><td> %          </td><td> 跳到(,{,[等符号对应的位置 </td></tr>
<tr><td> [[         </td><td> 光标跳转到代码块开头即{处,要求{独占一行 </td></tr>
<tr><td> gD         </td><td> 光标跳转到局部变量定义处 </td></tr>
<tr><td> ''         </td><td> 光标跳转到上次停靠处     </td></tr>
<tr><td> ^          </td><td> 把光标移至当前行的起始位置，也即当前行的第一个非空白字符位置 </td></tr>
<tr><td> $          </td><td> 移至行尾 </td></tr>
<tr><td> n$         </td><td> 移动到下面（包括光标所在行）n行的行尾 </td></tr>
<tr><td> gg         </td><td> 到第一行     </td></tr>
<tr><td> G          </td><td> 到最后一行   </td></tr>
<tr><td> nG         </td><td> 到第n行      </td></tr>
<tr><td> :n         </td><td> 到第n行      </td></tr>
</table>

## 词组 ##

如果连个单词直接有逗号连接，则认为是一个单词
<table class="table table-condensed">
<tr><th> 移动命令 </th><th> 操作                              </th></tr>
<tr><td> W        </td><td> 移到下一个单词的首位置            </td></tr>
<tr><td> w        </td><td> 右移到一个单词的首位置            </td></tr>
<tr><td> e        </td><td> 移动到单词末尾                    </td></tr>
<tr><td> E        </td><td> 同e,只是以空格字符作为字的分隔符  </td></tr>
<tr><td> b        </td><td> 移动到单词的头部                  </td></tr>
<tr><td> B        </td><td> 同b,只是以空格字符作为字的分隔符  </td></tr>
</table>

多个词组光标移动：

需要在使用前加上要移动的词组的个数即可。

一个英文字母的宽度是1，两个字母的宽度等于一个汉字的宽度。

# 行号 #

<table class="table table-condensed">
<tr><th> 命令     </th><th> 操作         </th></tr>
<tr><td> :set nu  </td><td> 设置行号     </td></tr>
<tr><td> :set nonu</td><td> 去行号       </td></tr>
<tr><td> :set nu! </td><td> 取消显示行号 </td></tr>
</table>

# 编辑 #

## 保存退出 ##

| 命令  | 操作 |
| ------| ----- |
| :wq   | 保存修改并退出|
| ZZ    | 快捷键，保存修改并退出(前面没有冒号)|
| :q!   | 不保存退出 |
| :wq!  | 强行保存退出，(文件所属者科忽略文件的制度属性)|
| :w    | 保存不退出|
| :wqa  |保存所有文件|
| :w new_filename  |另存为指定文件|

## 复制/删除/剪切 ##

| 命令 | 作用 |
| ---- | ---- |
| x    | 删除光标右边的字符 |
| nx   | 删除光标所在处左边n个字符|
| X    | 删除光标左边的字符|
| nX   | 删除光标左边n个文字 |
| d    | 用于剪切删除文字 |
| dl   | 删除当前字符， dl=x|
| dh   | 删除前一个字符 |
| dw   | 删除光标之后的单词剩余部分|
| dnw  | 删除光标之后的单词剩余部分和n个单词|
| db   | 删除到某个单词的开始位置|
| de   | 删除一个单词 |
| dne  | 删除光标后面n个单词 |
| dd   | 删除光标所在行，ndd删除n行 |
| ndd  | 删除光标所在行向下 n 行|
| dj   | 删除上一行|
| dk   | 删除下一行|
| dG   | 删除光标所在行到文件末尾的内容|
| d1G  | 删除光标所在行到第一行的所有数据|
| dgg  | 删除当前行到文件首部的所有行(包括当前行)|
| jdG  | 删除当前行之后所有行（包括当前行）|
| D    | 删除当前字符至行尾，D=d$|
| d$   | 与D效果相同|
| d0   | 是数字0)删除到行首，不包含光标处的字符|
| d^   | 与d0效果相同|
| :n,$d | 删除n行及以后所有的行|
| :1,$d | 删除所有行|
| : n1,n2d|删除n1行到n2行之间的行。范例:6655,6665d|
| ddp  | 交换当前行和其下一行|
| dl   | 删除字符 (缩写: "x")|
| diw  | 删除内含单词|
| daw  | 删除一个单词|
| diW  | 删除内含字串|
| daW  | 删除一个字串|
| dis  | 删除内含句子|
| das  | 删除一个句子|
| dib  | 删除内含 '(' ')' 块|
| dab  | 删除一个 '(' ')' 块|
| dip  | 删除内含段落|
| dap  | 删除一个段落|
| diB  | 删除内含 '{ ' ' }' 大块|
| daB  | 删除一个 '{ ' ' }' 大块|
| yy/Y | 复制当前行|
| nyy/nY |复制当前行一下n行(包括当前行)|
| p/P  |粘贴在当前光标所在行下或行上|
| :n1,n2 m n3 |将第n1-n2行移动到第n3行之后|

重复执行操作
很多时候一个操作，我们要执行几遍。通过.来进行重复的操作
举例：假设光标在abc处。我们来重复删除2个单词：
abc  bdf   sdfe   erwer   eete   wer  uty
在command模式下，先输入d2w，然后输入.(英文的句号)，就会不断执行删除两个单词的操作，按多少次.就重复多少次.

## 插入 ##

| 插入命令 | 操作 |
| ------| ----- |
| i     | 光标前插入文本    |
| I     | 在本行开始插入文本|
| a     | 在光标后附加文本  |
| A     | 在本行行末附加文本|
| o     | 在光标下插入新行  |
| O     | 在光标上插入新行  |

重复执行操作
vim在COMMAND模式下，先按数字3键，然后按 i键，在输入go，再按Esc键。可以输入gogogo.

## 字符替换 ##

| 命令 | 操作 |
| ----- | ----- |
| r     |替换光标所在处一个字符，如ra，就是将当前光标所在处字符替换为a|
| R     |开始替换,直到按ESC键退出替换,相当于按下键盘上到insert键|
| cc    |取代光标所在整行|
| S     |与ss效果相同|
| C     |取代到行尾,包括光标处字符|
| c0/c^ |取代到行首,不包括光标处字符|

## 撤销操作 ##

| 命令  | 操作 |
| ----- | ----- |
| u     | 取消上一步操作(最多连续取消500次) |
| Ctrl+r| 恢复上一步被撤销的操作 |
| U     | 撤销当前一行的操作 |

## 自动补齐 ##

| 命令 | 操作 |
| ---- | ----- |
| C-n  | 匹配下一个关键字 |
| C-p  | 匹配上一个关键字 |

## 简单排版 ##

| 命令 | 操作 |
| ----- | ----- |
| :ce(nter) | 居中显示光标所在行|
| :ri(ght)  | 靠右显示光标所在行|
| :le(ft)   | 靠左显示光标所在行|
| J         | 将光标所在下一行合并到光标所在行|
| &gt;&gt;  | 光标所在行增加缩进(一个tab)|
| &lt;&lt;  | 光标所在行减少缩进(一个tab)|
| n&gt;&gt; | 光标所在行开始的n行增加缩进|
| n&lt;&lt; | 光标所在行开始的n行减少缩进|

## 重复输入文本 ##

还有，如将数字加在命令前,标示该命令处理几次,如5dd标示执行5次dd(删除光标所在整行)操作。
.   (英文句号）为命令重复命令，按下一次执行一次上一次执行过的命令。


# 快速定位/搜索 #

在command模式下，通过按  f 或者 F   快速定位内容。(不需要输入冒号)

可以结合数字来进行多次查找，如按下3fq,就会向下查找第三个q
如果不加数字，如fq ,就会向后查找第一个q

## 字符串/单词搜索和替换 ##

### 搜索 ###

|命令 | 操作|
| --- | ----|
| f   | 向后查找|
| F   | 向前查找|
| *   | 向后完整查找光标下的相同词组|
| #   | 向前完整查找光标下的相同词组|
| g*  | 向后部分查找光标下的相同词组|
| g#  | 向前部分查找光标下的相同词组|
| n   | 查找模式下，搜索指定字符串的下一个出现位置|
| N   | 查找模式下，往上找指定字符串出现的位置|
| /string | 向前搜索指定字符串|
| string  | 从光标处开始向上开始查找字符从string|
| set  ic | 查找时，忽略大小写|
| set noic| 查找时，不忽略大小写|
| :nohlsearch |关闭当前的高亮显示，如果再次搜索或者按下n或N键，则会再次高亮|
| :set incsearch |逐步搜索模式，对当前键入的字符进行搜索而不必等待键入完成|
| :set wrapscan  |重新搜索，在搜索到文件头或尾时，返回继续搜索，默认开启|

### 替换 ###

| 命令 | 操作 |
| ----- |------|
| s/old/new/    | 用old替换new，替换当前行的第一个匹配|
| s/old/new/g   | 用old替换new，替换当前行的所有匹配|
| :%s/old/new/  | 用old替换new，替换所有行的第一个匹配|
| :%s/old/new/g | 全文替换指定字符串|
| :n1,n2s/old/new/g | 在一定范围内替换指定字符串|

若将上条命令中g改为c，就会询问是否替换。在替换文本old或new中有特殊字符，如“/”等，都需要用\进行转义
vim中有一些特殊字符在查找时需要转义.*[]^%/?~$
关于vim替换的语法格式
语法为 :[addr]s/源字符串/目的字符串/[option]
全局替换命令为：:%s/源字符串/目的字符串/g

- [addr] 表示检索范围，省略时表示当前行。
如：“1，20” ：表示从第1行到20行；
“%” ：表示整个文件，同“1,$”；
“. ,$” ：从当前行到文件尾；
- s : 表示替换操作
- [option] : 表示操作类型
如：g 表示全局替换;
c 表示进行确认;
p 表示替代结果逐行显示（Ctrl + L恢复屏幕）;
省略option时仅对每行第一个匹配串进行替换；
如果在源字符串和目的字符串中出现特殊字符，需要用”\”转义


<strong>下面是一些例子：</strong>

| 目的 | 操作 |
| ------ | ------- |
| 删除所有空行             |:g/^$/d<|
| 删除所有的空白行和空行   |:g/^[  ][  ]*$/d|
| 在每行的开始插入两个空白 |:%s/^/&gt;  /|
| 在接下来的6行末尾加入.   |:.,5/$/./|
| 将多个空格换成一个空格   |:%s/  */ /g|
| 颠倒文件的行序           |:g/.*/m0O  <=> :g/^/m0O|
| 将That or this换成This or that|:%s/\(That\) or \(this\)/\u\2 or \l\1/|
| 将句尾的child换成children     |:%s/child\([ ,.;!:?]\)/children\1/g|

# 块编辑 #

Ctrl+V 进入块选择/块编辑模式/块选择
LINUX下是Ctrl-v，但是在windows下的GVIM，Ctril-v是粘贴。所以，windows下按 Ctrl-q 进入块(列)编辑

|块编辑命令|操作|
|------|-------|
| v      |字符选择，会将光标经过的地方反白选择|
| V      |行选择，会将光标经过的行反白选择|
| ctrl+v |块选择，可以用长方形的方式来选择数据|
| y      |复制反白的地方|
| d      |删除反白的地方|
| p      |粘贴到上一行|
| P      |粘贴到下一行|
| $      |将块选择中的每一行都扩展至行尾|
| h      |停止上面的状态|
| Ixxx&lt;Esc&gt;|在被选中的块的前面插入xxx|
| 0Ixxx&lt;Esc&gt;|在被选中的块的每一行的行首插入xxx|
| Axxx&lt;Esc&gt; |在被选中的块的后面追加xxx|
| $Axxx&lt;Esc&gt;|在被选中的块的每一行的行尾追加xxx|
| cxxx&lt;Esc&gt; |在被选中的块中删除被选中的块并以xxx替代|
| Cxxx&lt;Esc&gt; |在被选中的块中删除被选中的块一直到第一行行尾，并以xxx替代|
| rx              |把被选中的块中的所有字符都替换成x|
| ~               |交换大小写|
| U               |小写变大写|
| u               |大写变小写|
| &gt;            |将被选中的块向右移动一个shift单位，空出来的地方填补空格|
| &lt;            |同上，但是是向左移动，但是移动的单位同时受限于左边的边界|
| J               |将下一行附在当前行的末尾，本行的尾空格与下一行的头空格全都只用一个空格代替|
| gJ              |同上，但是不对原文本内容做任何改动|
| :read a.txt     |将a.txt读入并放在当前行的下一行|
| :$r a.txt       |将a.txt读入并放在当前文件的最后|
| :0r a.txt       |将a.txt读入并放在当前文件的最开始|
| :.,$w tmp       |将当前行到最后一行写入tmp文件中|
| :.,$w! tmp      |将当前行到最后一行写入tmp文件中，即使tmp已存在|
| :.write &gt;&gt;tmp|将当前行追加到tmp文件|
| gU              |将字符变大写|
| gUl             |将当前字符变大写|
| gUw             |将当前字符至该word结束变大写|
| gU$             |将当前字符至行尾变大写|
| gUgU            |将当前整行变大写，可省略为gUU|
| gu              |将字符变小写|
| gul             |将当前字符变小写|
| guw             |将当前字符至该word结束变小写|
| gu$             |将当前字符至行尾变小写|
| gugu            |将当前整行变小写，可省略为guu|
| g~              |改变字符大小写|
| g~l             |改变当前字符大小写|
| g~w             |改变当前字符至该word结束大小写|
| g~$             |改变当前字符至行尾大小写|
| g~g~            |改变整行字符大小写，可省略为g~~|
| :[range]![shell command]|以range范围内的文本作为输入去执行command命令，并将结果覆盖写回range中。或者用光标移动符代替:[range]|
| :read ![shell command]  |运行command并将输出写到当前行的下面|
| :0r ![shell command]    |同上，输出被写入文件开头|
| :write ![shell command] |运行command并将整个文件写入到command的输入|
| :.w ![shell command]    |同上，只会将当前行输入给command|
| Ctrl+L          |重绘屏幕|
| :%s/\&lt;four\&gt;/4/g  |将文件中所有的单词four替换成4|
| :g/^$/d		  |删除空格行|
| :%s/^\s*//g	  	  |删除行首空格|
| :%s/\s*$//g	  	  |删除行尾空格|
